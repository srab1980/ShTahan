"""
سكريبت لإضافة مقالات تجريبية إلى قاعدة البيانات
"""
import os
import sys
from datetime import datetime, timedelta
from app import app, db
from models import Article

def seed_articles():
    """إضافة بيانات مقالات تجريبية"""
    
    # فحص إذا كانت توجد مقالات في قاعدة البيانات
    existing_count = Article.query.count()
    if existing_count > 0:
        print(f"يوجد بالفعل {existing_count} مقالات في قاعدة البيانات. لا يلزم إضافة المزيد.")
        return

    # إنشاء قائمة بالمقالات
    articles = [
        {
            "title": "التربية الإيمانية وأثرها في تنشئة الشباب",
            "summary": "تناقش هذه المقالة أهمية التربية الإيمانية ودورها في بناء شخصية الشباب المسلم وتحصينه من التيارات الفكرية المعاصرة.",
            "content": """
            <h2>التربية الإيمانية وأثرها في تنشئة الشباب</h2>
            
            <p>من أهم ما يميز التربية الإيمانية هو أنها تعتمد على منهج متكامل يشمل جوانب الإنسان المختلفة. فهي تعنى بتربية العقل والروح والجسد معاً، وتتعامل مع الإنسان ككائن متكامل له أبعاد متعددة.</p>
            
            <p>وتكمن أهمية التربية الإيمانية للشباب في عدة نقاط أساسية:</p>
            
            <ol>
                <li>تحصين الشباب فكرياً ضد التيارات الفكرية المنحرفة.</li>
                <li>تنمية الوازع الديني الذي يضبط السلوك ويوجهه.</li>
                <li>إكساب الشباب القدرة على التمييز بين الحق والباطل.</li>
                <li>تعزيز الهوية الإسلامية في نفوس الشباب.</li>
                <li>تنمية روح المسؤولية تجاه الأمة وقضاياها.</li>
            </ol>
            
            <p>إن من أهم التحديات التي تواجه التربية الإيمانية للشباب في العصر الحاضر هو طغيان المادية وانتشار وسائل التواصل الاجتماعي وتأثيرها السلبي على القيم والأخلاق. ولذلك فإن المربين مطالبون بمواكبة هذه التحديات وإيجاد الأساليب التربوية الحديثة التي تخاطب عقل الشاب المعاصر وتلامس اهتماماته.</p>
            
            <p>وفي الختام، فإن التربية الإيمانية ليست مجرد معلومات يتم تلقينها، بل هي منهج حياة متكامل يهدف إلى بناء شخصية متوازنة قادرة على مواجهة تحديات العصر.</p>
            """,
            "category": "تربية",
            "image": "/static/img/articles/article1.jpg",
            "created_at": datetime.utcnow() - timedelta(days=5)
        },
        {
            "title": "منهج الشيخ مصطفى الطحان في الدعوة والتربية",
            "summary": "نظرة تحليلية لمنهج الشيخ مصطفى الطحان في الدعوة والتربية وأثره في تكوين جيل من الدعاة والمربين.",
            "content": """
            <h2>منهج الشيخ مصطفى الطحان في الدعوة والتربية</h2>
            
            <p>امتاز منهج الشيخ مصطفى الطحان رحمه الله في الدعوة والتربية بالوسطية والاعتدال، بعيداً عن التشدد والغلو، وبعيداً أيضاً عن التفريط والتساهل. وقد اعتمد في منهجه على عدة أسس منها:</p>
            
            <h3>الأسس الفكرية لمنهج الشيخ:</h3>
            
            <ul>
                <li>الاعتماد على القرآن والسنة كمصدر أساسي للمعرفة والتربية.</li>
                <li>فهم الواقع وفقه الأولويات في الدعوة.</li>
                <li>التجديد في الخطاب الدعوي بما يناسب العصر ويحافظ على الثوابت.</li>
                <li>الاهتمام بتكوين القاعدة الفكرية السليمة لدى المدعوين.</li>
            </ul>
            
            <h3>الوسائل التربوية عند الشيخ:</h3>
            
            <ul>
                <li>التربية بالقدوة وتقديم النماذج العملية.</li>
                <li>التربية بالممارسة والعمل لا بالتلقين فقط.</li>
                <li>استثمار المناسبات والأحداث في غرس القيم.</li>
                <li>الاعتماد على أسلوب الحوار والإقناع لا الفرض والإلزام.</li>
            </ul>
            
            <p>لقد ترك الشيخ مصطفى الطحان إرثاً تربوياً غنياً يمكن الاستفادة منه في تكوين جيل من الدعاة والمربين القادرين على حمل الرسالة وأداء الأمانة في ظل التحديات المعاصرة.</p>
            """,
            "category": "فكر إسلامي",
            "image": "/static/img/articles/article2.jpg",
            "created_at": datetime.utcnow() - timedelta(days=3)
        },
        {
            "title": "دور المراكز الإسلامية في الغرب",
            "summary": "تتناول هذه المقالة أهمية المراكز الإسلامية في الغرب ودورها في الحفاظ على الهوية الإسلامية وتقديم صورة صحيحة عن الإسلام.",
            "content": """
            <h2>دور المراكز الإسلامية في الغرب</h2>
            
            <p>أصبحت المراكز الإسلامية في الغرب تمثل منارات هداية ومنابر دعوة تؤدي دوراً محورياً في حياة المسلمين المغتربين، وفي تقديم صورة صحيحة عن الإسلام للمجتمعات الغربية. ويمكن تلخيص دور هذه المراكز في النقاط التالية:</p>
            
            <h3>الدور الديني والتعليمي:</h3>
            
            <ul>
                <li>إقامة الشعائر الإسلامية من صلاة وذكر.</li>
                <li>تحفيظ القرآن الكريم وتعليم أحكامه.</li>
                <li>تقديم الدروس الدينية وحلقات العلم.</li>
                <li>تعليم اللغة العربية لأبناء المسلمين.</li>
            </ul>
            
            <h3>الدور الاجتماعي:</h3>
            
            <ul>
                <li>تقديم الخدمات الاجتماعية للجالية المسلمة.</li>
                <li>حل المشكلات الأسرية وتقديم الاستشارات.</li>
                <li>إقامة المناسبات الإسلامية والاجتماعية.</li>
                <li>توثيق صلة أبناء المسلمين بجذورهم الثقافية والحضارية.</li>
            </ul>
            
            <h3>الدور الدعوي:</h3>
            
            <ul>
                <li>تعريف غير المسلمين بالإسلام ومبادئه.</li>
                <li>تصحيح المفاهيم الخاطئة عن الإسلام.</li>
                <li>تنظيم الزيارات للمراكز من قبل الوفود والمدارس.</li>
                <li>المشاركة في الحوار بين الأديان والثقافات.</li>
            </ul>
            
            <p>إن المراكز الإسلامية في الغرب تمثل نقطة التقاء بين الحضارة الإسلامية والحضارة الغربية، ولذلك فهي مطالبة بأن تكون جسراً للتواصل وليس حاجزاً للقطيعة، وأن تقدم نموذجاً إيجابياً للتعايش والتفاعل الحضاري.</p>
            """,
            "category": "مجتمع",
            "image": "/static/img/articles/article3.jpg",
            "created_at": datetime.utcnow() - timedelta(days=2)
        },
        {
            "title": "تحديات التعليم الإسلامي في العصر الحديث",
            "summary": "دراسة للتحديات التي تواجه التعليم الإسلامي في العصر الحديث وسبل تطويره ليواكب متطلبات العصر.",
            "content": """
            <h2>تحديات التعليم الإسلامي في العصر الحديث</h2>
            
            <p>يواجه التعليم الإسلامي في العصر الحديث تحديات كبيرة تتطلب إعادة النظر في المناهج والأساليب التعليمية. ومن أبرز هذه التحديات:</p>
            
            <h3>التحديات المنهجية:</h3>
            
            <ul>
                <li>الفجوة بين النظرية والتطبيق في المناهج التعليمية.</li>
                <li>عدم مواكبة المناهج لمستجدات العصر وتطوراته.</li>
                <li>الاعتماد على الحفظ والتلقين دون تنمية مهارات التفكير النقدي.</li>
                <li>ضعف التكامل بين العلوم الشرعية والعلوم الحديثة.</li>
            </ul>
            
            <h3>التحديات التقنية:</h3>
            
            <ul>
                <li>ضعف الاستفادة من التقنيات الحديثة في التعليم الإسلامي.</li>
                <li>قلة المحتوى الإلكتروني الإسلامي المؤهل تربوياً.</li>
                <li>تحدي الفجوة الرقمية بين المؤسسات التعليمية الإسلامية.</li>
            </ul>
            
            <h3>التحديات الفكرية:</h3>
            
            <ul>
                <li>مواجهة التيارات الفكرية المعادية للإسلام.</li>
                <li>التشويه المتعمد لصورة الإسلام في المناهج الغربية.</li>
                <li>تحدي العولمة الثقافية وتأثيرها على الهوية الإسلامية.</li>
            </ul>
            
            <p>ولمواجهة هذه التحديات، لا بد من تطوير استراتيجيات جديدة للتعليم الإسلامي تجمع بين الأصالة والمعاصرة، وتستفيد من التقنيات الحديثة، وتنمي مهارات التفكير النقدي لدى الطلاب، وتؤهلهم للمشاركة الفاعلة في بناء الحضارة الإنسانية.</p>
            """,
            "category": "تربية",
            "image": "/static/img/articles/article4.jpg",
            "created_at": datetime.utcnow() - timedelta(days=1)
        },
        {
            "title": "الوسطية في الخطاب الإسلامي المعاصر",
            "summary": "بحث في مفهوم الوسطية وأهميتها في الخطاب الإسلامي المعاصر ودورها في مواجهة التطرف والغلو.",
            "content": """
            <h2>الوسطية في الخطاب الإسلامي المعاصر</h2>
            
            <p>تعتبر الوسطية من أهم خصائص الدين الإسلامي، قال تعالى: "وَكَذَلِكَ جَعَلْنَاكُمْ أُمَّةً وَسَطًا". والمقصود بالوسطية هنا هو التوازن والاعتدال، بعيداً عن الإفراط والتفريط، والغلو والتقصير.</p>
            
            <p>وتبرز أهمية الوسطية في الخطاب الإسلامي المعاصر في عدة جوانب:</p>
            
            <ol>
                <li>تصحيح المفاهيم المغلوطة عن الإسلام والتي ارتبطت بالتطرف والغلو.</li>
                <li>تقديم صورة حقيقية عن سماحة الإسلام واعتداله.</li>
                <li>تحصين الشباب المسلم ضد الأفكار المتطرفة.</li>
                <li>إيجاد خطاب إسلامي متوازن يجمع بين الثوابت والمتغيرات.</li>
                <li>تعزيز قيم التعايش والحوار مع الآخر.</li>
            </ol>
            
            <p>ومن معالم الوسطية في الخطاب الإسلامي المعاصر:</p>
            
            <ul>
                <li>التوازن بين النص والواقع.</li>
                <li>الاهتمام بفقه الواقع وفهم سنن التغيير والتطور.</li>
                <li>مراعاة فقه الأولويات في تناول القضايا المعاصرة.</li>
                <li>تجديد الخطاب الديني بما يتناسب مع روح العصر دون المساس بالثوابت.</li>
                <li>الانفتاح على الآخر والإفادة من تجاربه الإيجابية.</li>
            </ul>
            
            <p>إن ترسيخ منهج الوسطية في الخطاب الإسلامي المعاصر يتطلب جهداً علمياً وتربوياً كبيراً، يبدأ من المؤسسات التعليمية والتربوية، ومروراً بوسائل الإعلام، وانتهاءً بالخطاب الديني في المساجد والمراكز الإسلامية.</p>
            """,
            "category": "فكر إسلامي",
            "image": "/static/img/articles/article5.jpg",
            "created_at": datetime.utcnow() - timedelta(hours=12)
        },
        {
            "title": "أثر الإعلام الجديد على الهوية الإسلامية",
            "summary": "دراسة لتأثير وسائل الإعلام الجديدة والتواصل الاجتماعي على الهوية الإسلامية وكيفية الاستفادة منها.",
            "content": """
            <h2>أثر الإعلام الجديد على الهوية الإسلامية</h2>
            
            <p>أحدثت وسائل الإعلام الجديدة ومنصات التواصل الاجتماعي تغييرات جذرية في طريقة تلقي المعلومات ونشرها، مما أثر بشكل كبير على تشكيل الهوية الثقافية والدينية، بما في ذلك الهوية الإسلامية.</p>
            
            <h3>التأثيرات الإيجابية:</h3>
            
            <ul>
                <li>سهولة نشر المحتوى الإسلامي والوصول إلى شرائح واسعة.</li>
                <li>التواصل بين المسلمين في مختلف أنحاء العالم وتبادل الخبرات.</li>
                <li>إتاحة الفرصة للتعريف بالإسلام ورد الشبهات عنه.</li>
                <li>توفير منصات تعليمية لتعلم العلوم الشرعية عن بعد.</li>
            </ul>
            
            <h3>التأثيرات السلبية:</h3>
            
            <ul>
                <li>انتشار الفتاوى الشاذة والآراء غير المعتمدة.</li>
                <li>تشويش المفاهيم الدينية نتيجة تعدد المرجعيات غير المؤهلة.</li>
                <li>سهولة نشر الشبهات والأفكار المشككة في الثوابت الإسلامية.</li>
                <li>التأثير السلبي لبعض المحتويات على الأخلاق والقيم الإسلامية.</li>
            </ul>
            
            <h3>سبل الاستفادة من الإعلام الجديد في تعزيز الهوية الإسلامية:</h3>
            
            <ol>
                <li>إنشاء منصات إلكترونية موثوقة للفتوى والإرشاد الديني.</li>
                <li>تطوير المحتوى الإسلامي بما يناسب لغة العصر واهتمامات الشباب.</li>
                <li>توظيف التقنيات الحديثة في نشر القيم الإسلامية بطريقة جذابة ومؤثرة.</li>
                <li>تدريب الدعاة والمؤثرين على آليات التعامل مع وسائل الإعلام الجديد.</li>
                <li>تنمية الوعي النقدي لدى الشباب المسلم للتمييز بين المحتوى النافع والضار.</li>
            </ol>
            
            <p>إن الإعلام الجديد سلاح ذو حدين، يمكن أن يكون وسيلة لتعزيز الهوية الإسلامية ونشر قيمها، كما يمكن أن يكون أداة لتشويهها وزعزعتها. والمطلوب هو التعامل معه بوعي وحكمة، والاستفادة من إمكاناته الهائلة في خدمة الإسلام والمسلمين.</p>
            """,
            "category": "مجتمع",
            "image": "/static/img/articles/article6.jpg",
            "created_at": datetime.utcnow() - timedelta(hours=6)
        }
    ]

    # إضافة المقالات إلى قاعدة البيانات
    for article_data in articles:
        # التحقق مما إذا كان المقال موجوداً بالفعل
        existing_article = Article.query.filter_by(title=article_data['title']).first()
        if not existing_article:
            article = Article(
                title=article_data['title'],
                summary=article_data['summary'],
                content=article_data['content'],
                category=article_data['category'],
                image=article_data.get('image'),
                created_at=article_data.get('created_at', datetime.utcnow())
            )
            db.session.add(article)
    
    # حفظ التغييرات في قاعدة البيانات
    db.session.commit()
    print(f"تمت إضافة {len(articles)} مقالات بنجاح!")

if __name__ == "__main__":
    # يجب تشغيل هذا السكريبت ضمن سياق التطبيق
    with app.app_context():
        seed_articles()